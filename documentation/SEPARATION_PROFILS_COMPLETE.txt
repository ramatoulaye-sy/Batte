‚úÖ S√âPARATION STRICTE DES PROFILS - OPTION A
=============================================

PROBLEMES RESOLUS
-----------------
‚ùå Ordre illogique √† l'inscription (nom avant type de compte)
‚ùå Collecteurs pouvaient acc√©der au dashboard utilisateur
‚ùå Utilisateurs pouvaient acc√©der au dashboard collecteur
‚ùå ProfileChoiceScreen cr√©ait de la confusion

SOLUTION IMPLEMENTEE : OPTION A
--------------------------------
‚úÖ Un seul profil par compte
‚úÖ Choix d√©finitif √† l'inscription
‚úÖ S√©paration stricte des interfaces
‚úÖ Aucun croisement possible


CHANGEMENTS APPORTES
---------------------

1. ECRAN D'INSCRIPTION (login_screen.dart)
   ‚úÖ NOUVEL ORDRE :
      1Ô∏è‚É£ Choix du type (Utilisateur ou Collecteur)
      2Ô∏è‚É£ Nom complet
      3Ô∏è‚É£ Email
      4Ô∏è‚É£ Mot de passe
   
   ‚úÖ FLUX D'INSCRIPTION :
      - Utilisateur ‚Üí Cr√©e profil 'user' ‚Üí Redirige vers /home
      - Collecteur ‚Üí Cr√©e profil 'collector' ‚Üí Formulaire collecteur ‚Üí Dashboard collecteur
   
   ‚úÖ FLUX DE LOGIN :
      - V√©rifie le profil de l'utilisateur
      - Collecteur ‚Üí /collector-dashboard
      - Utilisateur ‚Üí /home

2. SPLASH SCREEN (splash_screen.dart)
   ‚úÖ V√©rifie le profil au d√©marrage
   ‚úÖ Redirection automatique :
      - Collecteur ‚Üí CollectorDashboardScreen
      - Utilisateur ‚Üí HomeScreen
   ‚úÖ Plus de ProfileChoiceScreen

3. APP.DART
   ‚úÖ Supprim√© : ProfileChoiceScreen
   ‚úÖ Ajout√© route : /collector-dashboard

4. HOME SCREEN (home_screen.dart)
   ‚úÖ V√©rification au chargement :
      - Si profil = 'collector' uniquement ‚Üí Redirige vers dashboard collecteur
      - Sinon ‚Üí Charge normalement
   ‚úÖ Emp√™che les collecteurs d'acc√©der √† l'interface utilisateur

5. COLLECTOR DASHBOARD (collector_dashboard_screen.dart)
   ‚úÖ V√©rification au chargement :
      - Si profil = 'user' uniquement ‚Üí Redirige vers home
      - Sinon ‚Üí Charge normalement
   ‚úÖ Emp√™che les utilisateurs d'acc√©der √† l'interface collecteur


FLUX COMPLETS
-------------

NOUVEAU COMPTE UTILISATEUR
---------------------------
1. Inscription
2. Choisit "UTILISATEUR" (carte verte)
3. Remplit : Nom, Email, Mot de passe
4. Clic "S'inscrire"
5. ‚úÖ Profil 'user' cr√©√©
6. ‚úÖ Redirection ‚Üí HomeScreen
7. ‚úÖ Acc√®s √† : Home, Recyclage, Budget, Education, Services
8. ‚ùå AUCUN acc√®s au dashboard collecteur

NOUVEAU COMPTE COLLECTEUR
--------------------------
1. Inscription
2. Choisit "COLLECTEUR" (carte jaune)
3. Remplit : Nom, Email, Mot de passe
4. Clic "S'inscrire"
5. ‚úÖ Profil 'collector' cr√©√©
6. ‚úÖ Redirection ‚Üí Formulaire collecteur
7. Remplit : Business, Licence, V√©hicule, Rayon
8. ‚úÖ Donn√©es collecteur cr√©√©es
9. ‚úÖ Redirection ‚Üí Dashboard Collecteur
10. ‚úÖ Acc√®s √† : Dashboard, Stats, Toggle disponibilit√©
11. ‚ùå AUCUN acc√®s aux fonctionnalit√©s utilisateur

LOGIN UTILISATEUR EXISTANT
---------------------------
1. Login avec email/mot de passe
2. ‚úÖ V√©rification profil = 'user'
3. ‚úÖ Redirection ‚Üí HomeScreen
4. ‚úÖ Interface utilisateur compl√®te
5. ‚ùå Impossible d'acc√©der au dashboard collecteur

LOGIN COLLECTEUR EXISTANT
--------------------------
1. Login avec email/mot de passe
2. ‚úÖ V√©rification profil = 'collector'
3. ‚úÖ Redirection ‚Üí CollectorDashboardScreen
4. ‚úÖ Interface collecteur compl√®te
5. ‚ùå Impossible d'acc√©der aux fonctionnalit√©s utilisateur


PROTECTIONS MISES EN PLACE
---------------------------

‚úÖ HomeScreen :
   - V√©rifie le profil au chargement
   - Redirige les collecteurs vers leur dashboard

‚úÖ CollectorDashboardScreen :
   - V√©rifie le profil au chargement
   - Redirige les utilisateurs vers le home

‚úÖ SplashScreen :
   - D√©tecte automatiquement le type de profil
   - Redirige vers la bonne interface

‚úÖ LoginScreen :
   - Lors de l'inscription : cr√©e le bon profil
   - Lors du login : redirige vers la bonne interface

‚úÖ Pas de ProfileChoiceScreen :
   - √âvite la confusion
   - Pas de "choix" apr√®s le login


SECURITE
--------
‚úÖ Un compte = UN seul profil (user OU collector)
‚úÖ Choix d√©finitif √† l'inscription
‚úÖ V√©rifications c√¥t√© client (redirection automatique)
‚úÖ TODO: Ajouter v√©rifications c√¥t√© serveur (RLS Supabase)


INTERFACE UTILISATEUR
---------------------
UTILISATEUR voit :
‚úÖ Navbar : Home, Recyclage, Budget, Education, Services
‚úÖ Dashboard avec : Solde, Eco-score, Statistiques, Graphiques
‚úÖ Recyclage : Scanner, Historique, Collecteurs
‚úÖ Budget : Transactions, Retraits
‚úÖ Education : Contenu √©ducatif

COLLECTEUR voit :
‚úÖ Dashboard sp√©cifique
‚úÖ Stats : Collectes, Gains, Rayon, Note
‚úÖ Toggle : Disponible/Indisponible
‚úÖ Informations business
‚úÖ Pas d'acc√®s aux fonctionnalit√©s de recyclage


BASE DE DONNEES
---------------
Table: user_profiles
- user_id (UUID)
- profile_type ('user' OU 'collector')
- is_active (boolean)

Un utilisateur = UNE seule ligne dans user_profiles
- profile_type = 'user' ‚Üí Utilisateur
- profile_type = 'collector' ‚Üí Collecteur

Table: collectors
- Donn√©es sp√©cifiques aux collecteurs
- Li√©e √† user_id des collecteurs uniquement


FICHIERS MODIFIES
-----------------
‚úÖ lib/screens/auth/login_screen.dart
   - Ordre des champs r√©organis√©
   - Flux inscription/login adapt√©

‚úÖ lib/screens/splash/splash_screen.dart
   - D√©tection profil automatique
   - Redirection directe

‚úÖ lib/app.dart
   - Route /collector-dashboard ajout√©e
   - ProfileChoiceScreen supprim√©e

‚úÖ lib/screens/home/home_screen.dart
   - Protection contre acc√®s collecteurs
   - M√©thode _checkUserProfileAndLoadData()

‚úÖ lib/screens/collector/collector_dashboard_screen.dart
   - Protection contre acc√®s utilisateurs
   - M√©thode _checkProfileAndLoadData()


POUR TESTER
-----------

TEST 1: INSCRIPTION UTILISATEUR
1. Red√©marre l'app (Ctrl+C puis flutter run)
2. Clic "Je n'ai pas de compte"
3. Tu vois d'abord les 2 CARTES (Utilisateur / Collecteur)
4. Clique "UTILISATEUR" (vert)
5. Remplis : Nom, Email, Mot de passe
6. S'inscrire
7. ‚úÖ Tu arrives au HomeScreen
8. ‚úÖ Navbar compl√®te visible
9. ‚ùå Impossible d'aller au dashboard collecteur

TEST 2: INSCRIPTION COLLECTEUR
1. Logout
2. Inscription nouveau compte
3. Clique "COLLECTEUR" (jaune)
4. Remplis : Nom, Email, Mot de passe
5. S'inscrire
6. ‚úÖ Formulaire collecteur s'affiche
7. Remplis : Business, Licence, V√©hicule, Rayon
8. Cr√©er profil
9. ‚úÖ Tu arrives au Dashboard Collecteur
10. ‚úÖ Stats et toggle disponibilit√© visibles
11. ‚ùå Pas de navbar utilisateur

TEST 3: RE-LOGIN
1. Logout
2. Login avec un compte utilisateur
3. ‚úÖ Va direct au HomeScreen
4. Logout
5. Login avec un compte collecteur
6. ‚úÖ Va direct au Dashboard Collecteur


RESULTAT FINAL
--------------
‚úÖ S√©paration stricte et claire
‚úÖ Un compte = un profil
‚úÖ Pas de confusion possible
‚úÖ Interface adapt√©e au r√¥le
‚úÖ Exp√©rience utilisateur fluide
‚úÖ S√©curit√© renforc√©e

L'APPLICATION EST MAINTENANT PARFAITEMENT S√âPAR√âE ! üéâ

